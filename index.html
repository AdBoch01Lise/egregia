<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>EGREGIA</title>
    <link rel="icon" type="image/jpeg" href="logo.jpeg">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@100;200;300;400&family=Playfair+Display:ital,wght@0,400;1,400&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="style.css">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
</head>
<body>
    <div class="grain"></div>
    <div id="overlay"></div>

    <main class="fade-in">
        <div class="hero-text">Egregia</div>
        <div class="statement">
            Structuration et transmission<br>
            des patrimoines privés et professionnels.<br>
            <br>
            Expertise juridique et fiscale <br>
            au service des familles et dirigeants,<br>
            pour assurer la continuité entre les générations.
        </div>
    </main>

    <div class="signature fade-in">
        <span class="signature-text">Ingénierie patrimoniale © 2026</span>
        
    </div>

    <nav class="top-right-nav fade-in">
        <button class="nav-link" id="open-panel" aria-label="Open Credo">
            <span class="nav-label credo-label">Credo</span>
        </button>
        <a href="mailto:contact@egregia.fr?subject=Premier%20contact" class="nav-link" aria-label="Contact Egregia">
            <span class="nav-label contact-label">Contact</span>
            <span class="contact-reveal">Confidentialité assurée</span>
        </a>
    </nav>

    <aside id="side-panel">
        <div class="panel-header">
            <h2 class="panel-title">Credo</h2>
            <button class="close-btn" id="close-panel" aria-label="Close panel">
                <svg width="14" height="14" viewBox="0 0 14 14" fill="none" xmlns="http://www.w3.org/2000/svg">
                    <path d="M1 1L13 13M1 13L13 1" stroke="currentColor" stroke-width="0.5"/>
                </svg>
            </button>
        </div>
        <div class="panel-content">
            <p>
                <span style="font-weight: 550; font-size: 0.8rem; color: #1f2326;">Egregia</span><br>
                Du latin <i>egregius</i> : remarquable, hors du commun.
            </p>
            <p>
                Ce nom porte une ambition simple et exigeante :<br>
                concevoir des architectures patrimoniales idoines, pensées pour nos clients.
            </p>
            <p>
                Nous intervenons lorsque le patrimoine devient une matière sensible,<br>
                lorsque les décisions engagent des générations.
            </p>
            <p>
                Guidés par la précision, la clarté et la vision de long terme,<br>
                nous transformons la complexité en lignes claires<br>
                et l'incertitude en avenir sûr.
            </p>
            <p>
                Dans l'ombre des règles et des chiffres,<br>
                nous révélons ce qui importe vraiment.
            </p>
            <p style="letter-spacing: 0.05em;">
                Ce qui doit être aménagé.<br>
                Ce qui doit être protégé.<br>
                Ce qui doit être transmis.<br>
                Ce qui doit traverser le temps.<br>
                <br>
                C'est là que notre action s'accomplit.
            </p>
        </div>
    </aside>

    <div id="contact-toast" class="contact-toast">Confidentialité assurée</div>

    <script>
        const openBtn = document.getElementById('open-panel');
        const closeBtn = document.getElementById('close-panel');
        const sidePanel = document.getElementById('side-panel');
        const overlay = document.getElementById('overlay');
        const body = document.body;
        const contactLink = document.querySelector('a[href^="mailto:"]');
        const contactToast = document.getElementById('contact-toast');

        const openPanel = () => {
            sidePanel.classList.add('active');
            body.classList.add('panel-open');
            overlay.classList.add('active');
            
            // Reset scroll positions
            const resetScroll = () => {
                sidePanel.scrollTop = 0;
                const panelContent = sidePanel.querySelector('.panel-content');
                if (panelContent) {
                    panelContent.scrollTop = 0;
                }
            };

            resetScroll();
            // Small delay to ensure it works on all mobile browsers during transition
            setTimeout(resetScroll, 10);

            // Reset parallax elements to their base positions on desktop
            if (window.innerWidth > 768) {
                document.querySelector('main').style.transform = 'translate(0, 0)';
                document.querySelector('.signature').style.transform = 'translateX(-50%)';
                document.querySelector('.top-right-nav').style.transform = 'translate(0, 0)';
            }
        };

        const closePanel = () => {
            sidePanel.classList.remove('active');
            body.classList.remove('panel-open');
            overlay.classList.remove('active');
            
            // Also reset scroll after closing transition finishes
            setTimeout(() => {
                sidePanel.scrollTop = 0;
                const panelContent = sidePanel.querySelector('.panel-content');
                if (panelContent) {
                    // console.log('resetting scroll', );
                    panelContent.scrollTop = 0;
                }
            }, 800);
        };

        let touchStartX = 0;
        let touchEndX = 0;

        sidePanel.addEventListener('touchstart', (e) => {
            touchStartX = e.changedTouches[0].screenX;
        }, { passive: true });

        sidePanel.addEventListener('touchend', (e) => {
            touchEndX = e.changedTouches[0].screenX;
            const swipeDistance = touchEndX - touchStartX;
            
            if (window.innerWidth <= 768 && swipeDistance > 50) {
                closePanel();
            }
        }, { passive: true });

        openBtn.addEventListener('click', () => {
            openBtn.blur();
            openPanel();
        });
        closeBtn.addEventListener('click', closePanel);
        overlay.addEventListener('click', closePanel);

        // Mobile Contact Toast
        contactLink.addEventListener('click', (e) => {
            contactLink.blur();
            if (window.innerWidth <= 768) {
                e.preventDefault();
                const mailtoUrl = contactLink.href;
                
                contactToast.classList.add('visible');
                
                setTimeout(() => {
                    contactToast.classList.remove('visible');
                    // Small delay to let the fade-out begin before opening mail
                    setTimeout(() => {
                        window.location.href = mailtoUrl;
                    }, 600);
                }, 1500);
            }
        });

        // Close panel on Esc key
        document.addEventListener('keydown', (e) => {
            if (e.key === 'Escape' && sidePanel.classList.contains('active')) {
                closePanel();
            }
        });

        // Subtle parallax effect on mouse move
        document.addEventListener('mousemove', (e) => {
            if (window.innerWidth > 768 && !sidePanel.classList.contains('active')) {
                const x = (e.clientX - window.innerWidth / 2) / 100;
                const y = (e.clientY - window.innerHeight / 2) / 100;
                
                // Using rem instead of px for consistent rendering
                const xRem = x / 16;
                const yRem = y / 16;
                
                document.querySelector('main').style.transform = `translate(${xRem}rem, ${yRem}rem)`;
                document.querySelector('.signature').style.transform = `translate(calc(-50% + ${xRem}rem), ${yRem}rem)`;
                document.querySelector('.top-right-nav').style.transform = `translate(${xRem}rem, ${yRem}rem)`;
            }
        });
    </script>
</body>
</html>
